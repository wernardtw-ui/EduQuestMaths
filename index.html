<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>EduQuestMath – Grade 9 SA</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="manifest" href="manifest.json">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
  :root{
    --bg:#0f172a; --panel:#111827; --card:#fff; --accent:#f59e0b;
    --ok:#10b981; --bad:#ef4444; --muted:#64748b;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family:'Inter', sans-serif;
    background: radial-gradient(1200px 600px at 30% -10%, #1f2937, var(--bg));
    color:#e5e7eb; padding:24px;}
  h1{text-align:center; margin:0 0 16px;}
  .toolbar{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; margin-bottom:16px;}
  .stat{display:flex; align-items:center;}
  .pill{padding:6px 12px; border-radius:999px; background:#0b1220; border:1px solid #1f2937;}
  .btn{appearance:none; border:none; border-radius:999px; padding:8px 16px; font-weight:700; cursor:pointer;
    transition:transform .2s, background .2s;}
  .btn.primary{background:var(--accent); color:var(--bg);}
  .btn.gemini{background: #50c48e; color: #0b1220;}
  .btn:hover{transform:scale(1.05);}
  .btn:disabled{opacity:.5; cursor:not-allowed; transform:none;}
  .pill.ok{color:var(--ok);}
  .pill.bad{color:var(--bad);}
  .controls-group{display:flex; flex-wrap:wrap; gap:12px;}
  .controls-group label, .controls-group select{
    font-size:14px; color:var(--muted); text-transform:uppercase; font-weight:bold;
  }
  .controls-group select{
    background:var(--panel); border-radius:6px; padding:4px 8px; border:1px solid #1f2937; color:#e5e7eb;
  }
  .controls-group option{color:#e5e7eb;}
  .question-panel{background:var(--panel); border-radius:12px; padding:24px; text-align:center; min-height:120px;
    display:flex; flex-direction:column; justify-content:center; align-items:center; box-shadow:0 8px 16px rgba(0,0,0,.3);}
  .question-text{font-size:24px; font-weight:700;}
  .question-hint{font-size:16px; color:var(--muted); margin-top:12px;}
  .game-area{display:flex; justify-content:center; align-items:center; gap:24px; margin-top:24px; flex-wrap:wrap; min-height:300px;}
  .card-container{
    display:flex; flex-direction:column; gap:12px; width:100%; max-width:250px;
    position:relative; z-index:1;
  }
  .card-container .title{text-align:center; font-weight:700;}
  .card-slot-area{
    min-height:200px; padding:12px; border-radius:12px;
    display:flex; flex-wrap:wrap; align-content:flex-start; justify-content:center;
    gap:8px;
  }
  .draw-pile{background:var(--panel); border:2px solid #1f2937; box-shadow:0 4px 8px rgba(0,0,0,.2);}
  .chain-area{
    display:flex; flex-direction:column; align-items:center; gap:12px;
    background:var(--panel); border-radius:12px; padding:24px;
    flex:1;
  }
  .chain-slots{display:flex; justify-content:center; gap:12px; flex-wrap:wrap;}
  .card{
    background:var(--card); color:var(--bg); padding:12px; border-radius:8px;
    font-weight:700; min-width:80px; text-align:center; cursor:pointer;
    transition:transform .2s, box-shadow .2s;
    box-shadow:0 2px 4px rgba(0,0,0,.1);
    white-space:nowrap;
  }
  .card:hover{transform:translateY(-2px); box-shadow:0 4px 8px rgba(0,0,0,.2);}
  .card.dragging{opacity:0.5; transform:scale(0.9);}
  .card-slot{
    border:2px dashed var(--muted); border-radius:8px; padding:8px;
    min-width:100px; min-height:48px;
    display:flex; align-items:center; justify-content:center;
    transition:border-color .3s;
  }
  .card-slot.drag-over{border-color:var(--accent);}
  .card-slot.correct{border-color:var(--ok);}
  .card-slot.incorrect{border-color:var(--bad);}
  .card-slot .card{cursor:default;}
  .discard-pile{background:#293347; border:2px solid #3c4962; min-height:100px; min-width:100px;}
  .toast-container{
    position:fixed; bottom:24px; right:24px; z-index:100;
    display:flex; flex-direction:column; gap:8px; align-items:flex-end;
  }
  .toast{
    background:#333; color:#fff; padding:12px 24px; border-radius:999px;
    animation:fadeInOut 3s forwards; box-shadow:0 4px 8px rgba(0,0,0,.2);
  }
  @keyframes fadeInOut{
    0%{opacity:0; transform:translateY(20px);}
    10%{opacity:1; transform:translateY(0);}
    90%{opacity:1; transform:translateY(0);}
    100%{opacity:0; transform:translateY(20px);}
  }
  .user-info{
    background: var(--panel);
    padding: 8px 16px;
    border-radius: 999px;
    font-size: 12px;
    color: var(--muted);
    font-weight: bold;
    margin-bottom: 16px;
  }
  .game-stats {
    display: flex;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 16px;
  }
  .score-info {
    font-size: 16px;
    font-weight: bold;
    color: var(--ok);
  }
  .score-label {
    font-size: 12px;
    color: var(--muted);
  }

  /* --- Mobile Optimizations --- */
  @media (max-width: 768px) {
    body {
      padding: 16px;
    }

    .toolbar {
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .question-panel {
      padding: 16px;
    }

    .question-text {
      font-size: 20px;
    }

    .game-area {
      flex-direction: column;
      gap: 16px;
      margin-top: 16px;
    }

    .card-container {
      max-width: none;
      width: 100%;
    }

    .chain-area {
      padding: 16px;
    }

    .chain-slots {
      gap: 8px;
    }
    
    .card {
      padding: 10px;
      font-size: 14px;
    }
  }
</style>
</head>
<body>

<div class="user-info">
  <span id="userIdDisplay">User ID loading...</span>
</div>

<h1>EduQuestMath</h1>
<div class="toolbar">
  <div class="controls-group">
    <label for="categorySelect">Category:</label>
    <select id="categorySelect"></select>
    <label for="difficultySelect">Difficulty:</label>
    <select id="difficultySelect"></select>
  </div>
  <div class="stat">
    <span class="pill">⏱ <span id="timerEl">60</span>s</span>
    <span class="pill ok">✅ <span id="correctScoreEl">0</span></span>
    <span class="pill bad">❌ <span id="incorrectScoreEl">0</span></span>
  </div>
</div>

<div class="question-panel">
  <div class="question-text" id="questionText"></div>
  <div class="question-hint" id="questionHint"></div>
</div>

<div class="game-area">
  <div class="card-container">
    <div class="title">Draw Pile</div>
    <div class="card-slot-area draw-pile" id="drawPile"></div>
  </div>

  <div class="chain-area">
    <div class="title">Solution Chain</div>
    <div class="chain-slots" id="chainSlots"></div>
  </div>

  <div class="card-container">
    <div class="title">Discard Pile</div>
    <div class="card-slot-area discard-pile" id="discardPile"></div>
  </div>
</div>

<div class="toolbar">
  <div class="controls-group">
    <button id="hintBtn" class="btn">Give Hint</button>
    <button id="geminiHintBtn" class="btn gemini">✨ Chat Hint</button>
    <button id="speakBtn" class="btn gemini">✨ Speak Question</button>
  </div>
  <div class="controls-group">
    <button id="restartBtn" class="btn primary">Restart</button>
    <button id="nextBtn" class="btn primary" disabled>Next Question</button>
  </div>
</div>

<div class="toast-container"></div>
<audio id="audioPlayer"></audio>

<script type="module">
  // Firebase imports
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getAuth, signInAnonymously, onAuthStateChanged, setPersistence, browserSessionPersistence } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

  // Data from questions.json embedded directly to avoid fetch errors
  const questionsData = [
    {
        "text": "Calculate: 1/4 + 3/8",
        "solution": [
            "Find a common denominator: 1/4 = 2/8.",
            "2/8 + 3/8 = 5/8.",
            "Answer: 5/8"
        ],
        "distractors": [
            "Answer: 4/12",
            "Answer: 1/2",
            "Answer: 4/8"
        ],
        "category": "Operations with numbers",
        "difficulty": "Easy"
    },
    {
        "text": "Calculate: 0.75 x 1.2",
        "solution": [
            "Multiply 75 by 12, which is 900.",
            "Since there are three decimal places in total (two in 0.75 and one in 1.2), the answer is 0.900.",
            "Answer: 0.9"
        ],
        "distractors": [
            "Answer: 9.0",
            "Answer: 0.09",
            "Answer: 0.85"
        ],
        "category": "Operations with numbers",
        "difficulty": "Medium"
    },
    {
        "text": "What is 15% of 240?",
        "solution": [
            "Convert the percentage to a decimal number: 15% = 0.15.",
            "Multiply 0.15 by 240.",
            "0.15 x 240 = 36.",
            "Answer: 36"
        ],
        "distractors": [
            "Answer: 15",
            "Answer: 24",
            "Answer: 360"
        ],
        "category": "Operations with numbers",
        "difficulty": "Easy"
    },
    {
        "text": "The price of an item was reduced by 20%. The new price is \\$80. What was the original price?",
        "solution": [
            "The new price (\\$80) is 100% - 20% = 80% of the original price.",
            "Let x be the original price. 0.80x = 80.",
            "x = 80 / 0.80 = 100.",
            "Answer: \\$100"
        ],
        "distractors": [
            "Answer: \\$96",
            "Answer: \\$64",
            "Answer: \\$120"
        ],
        "category": "Operations with numbers",
        "difficulty": "Hard"
    },
    {
        "text": "The length of a rectangle is 5 cm more than its width. If the perimeter is 30 cm, what is the length?",
        "solution": [
            "Let w be the width. The length is w + 5.",
            "Perimeter = 2(w + l) = 2(w + w + 5) = 2(2w + 5) = 4w + 10.",
            "4w + 10 = 30 => 4w = 20 => w = 5.",
            "Length = w + 5 = 5 + 5 = 10.",
            "Answer: 10 cm"
        ],
        "distractors": [
            "Answer: 5 cm",
            "Answer: 8 cm",
            "Answer: 12.5 cm"
        ],
        "category": "Geometry and Measurement - Perimeter",
        "difficulty": "Medium"
    },
    {
        "text": "A container holds 2.5 liters of liquid. How many 250 ml glasses can be filled from it?",
        "solution": [
            "Convert liters to milliliters: 2.5 L = 2500 ml.",
            "Divide the total volume by the glass volume: 2500 / 250.",
            "2500 / 250 = 10.",
            "Answer: 10 glasses"
        ],
        "distractors": [
            "Answer: 100 glasses",
            "Answer: 5 glasses",
            "Answer: 25 glasses"
        ],
        "category": "Geometry and Measurement - Volume",
        "difficulty": "Easy"
    },
    {
        "text": "What is the area of a circle with a radius of 5 cm? (Use $π ≈ 3.14$)",
        "solution": [
            "The area of a circle is given by the formula $A = πr^2$.",
            "$A = 3.14 \\times (5)^2 = 3.14 \\times 25$.",
            "$A = 78.5$.",
            "Answer: 78.5 $cm^2$"
        ],
        "distractors": [
            "Answer: 15.7 $cm^2$",
            "Answer: 31.4 $cm^2$",
            "Answer: 10 $cm^2$"
        ],
        "category": "Geometry and Measurement - Area",
        "difficulty": "Medium"
    },
    {
        "text": "The formula for the volume of a sphere is $V = \\frac{4}{3}πr^3$. Find the volume of a sphere with a radius of 3 m. (Use $π ≈ 3.14$)",
        "solution": [
            "Substitute r = 3 into the formula: $V = \\frac{4}{3} \\times 3.14 \\times (3)^3$.",
            "$V = \\frac{4}{3} \\times 3.14 \\times 27$.",
            "$V = 4 \\times 3.14 \\times 9 = 113.04$.",
            "Answer: 113.04 $m^3$"
        ],
        "distractors": [
            "Answer: 36 $m^3$",
            "Answer: 84.78 $m^3$",
            "Answer: 150.72 $m^3$"
        ],
        "category": "Geometry and Measurement - Volume",
        "difficulty": "Hard"
    },
    {
        "text": "Find the value of x in the equation $2x + 5 = 11$.",
        "solution": [
            "Subtract 5 from both sides: $2x = 11 - 5$.",
            "Simplify: $2x = 6$.",
            "Divide by 2: $x = 6 / 2 = 3$.",
            "Answer: x = 3"
        ],
        "distractors": [
            "Answer: x = 8",
            "Answer: x = 6",
            "Answer: x = 2"
        ],
        "category": "Number and Algebra - Equations",
        "difficulty": "Easy"
    },
    {
        "text": "Solve for y in the equation $4(y - 2) = 12$.",
        "solution": [
            "Divide both sides by 4: $y - 2 = 12 / 4 = 3$.",
            "Add 2 to both sides: $y = 3 + 2 = 5$.",
            "Answer: y = 5"
        ],
        "distractors": [
            "Answer: y = 4",
            "Answer: y = 2",
            "Answer: y = 7"
        ],
        "category": "Number and Algebra - Equations",
        "difficulty": "Medium"
    },
    {
        "text": "Find the value of x in the equation $3x + 10 = x - 6$.",
        "solution": [
            "Subtract x from both sides: $2x + 10 = -6$.",
            "Subtract 10 from both sides: $2x = -16$.",
            "Divide by 2: $x = -8$.",
            "Answer: x = -8"
        ],
        "distractors": [
            "Answer: x = -2",
            "Answer: x = 2",
            "Answer: x = 8"
        ],
        "category": "Number and Algebra - Equations",
        "difficulty": "Hard"
    },
    {
        "text": "Expand the expression: $(a + 3)(a - 2)$.",
        "solution": [
            "Use the FOIL method: First, Outer, Inner, Last.",
            "$(a)(a) + (a)(-2) + (3)(a) + (3)(-2) = a^2 - 2a + 3a - 6$.",
            "Combine like terms: $a^2 + a - 6$.",
            "Answer: $a^2 + a - 6$"
        ],
        "distractors": [
            "Answer: $a^2 - 6$",
            "Answer: $a^2 + 5a - 6$",
            "Answer: $a^2 + a + 6$"
        ],
        "category": "Number and Algebra - Expressions",
        "difficulty": "Medium"
    },
    {
        "text": "Factorize the expression: $x^2 + 7x + 12$.",
        "solution": [
            "Find two numbers that multiply to 12 and add to 7.",
            "The numbers are 3 and 4 (since $3 \\times 4 = 12$ and $3 + 4 = 7$).",
            "The factored form is $(x+3)(x+4)$.",
            "Answer: $(x+3)(x+4)$"
        ],
        "distractors": [
            "Answer: $(x+6)(x+2)$",
            "Answer: $(x+1)(x+12)$",
            "Answer: $(x-3)(x-4)$"
        ],
        "category": "Number and Algebra - Expressions",
        "difficulty": "Hard"
    },
    {
        "text": "What is the common difference of the sequence defined by $T_n = 7 - 2n$?",
        "solution": [
            "The common difference in a linear sequence $T_n = dn+c$ is the coefficient of n.",
            "Answer: -2"
        ],
        "distractors": [
            "Answer: 7",
            "Answer: 2",
            "Answer: 5"
        ],
        "category": "Number and Algebra - Sequences",
        "difficulty": "Medium"
    },
    {
        "text": "An arithmetic sequence has a first term of -10 and a common difference of 4. Find the 5th term.",
        "solution": [
            "Use the formula $T_n = a + (n-1)d$.",
            "$T_5 = -10 + (5-1) \\times 4 = -10 + 4 \\times 4 = -10 + 16$.",
            "Answer: 6"
        ],
        "distractors": [
            "Answer: 10",
            "Answer: -26",
            "Answer: 14"
        ],
        "category": "Number and Algebra - Sequences",
        "difficulty": "Easy"
    },
    {
        "text": "A geometric sequence starts with 1000 and has a common ratio of 0.1. What is the 4th term?",
        "solution": [
            "$T_1 = 1000$.",
            "$T_2 = 1000 \\times 0.1 = 100$.",
            "$T_3 = 100 \\times 0.1 = 10$.",
            "$T_4 = 10 \\times 0.1 = 1$.",
            "Answer: 1"
        ],
        "distractors": [
            "Answer: 10",
            "Answer: 0.01",
            "Answer: 0.1"
        ],
        "category": "Number and Algebra - Sequences",
        "difficulty": "Medium"
    },
    {
        "text": "A sequence is defined by the rule Tn = 5n - 1. What is the 8th term?",
        "solution": [
            "Substitute n = 8 into the rule.",
            "T8 = 5(8) - 1 = 40 - 1 = 39.",
            "Answer: 39"
        ],
        "distractors": [
            "Answer: 40",
            "Answer: 35",
            "Answer: 41"
        ],
        "category": "Sequences",
        "difficulty": "Easy"
    },
    {
        "text": "The first term of an arithmetic sequence is 25 and the 4th term is 16. Find the common difference.",
        "solution": [
            "Use the formula Tn = a + (n-1)d. T4 = 25 + (4-1)d = 16.",
            "25 + 3d = 16.",
            "3d = 16 - 25 = -9.",
            "d = -3.",
            "Answer: -3"
        ],
        "distractors": [
            "Answer: 3",
            "Answer: -9",
            "Answer: 9"
        ],
        "category": "Sequences",
        "difficulty": "Hard"
    },
    {
        "text": "The 3rd term of a geometric sequence is 12 and the common ratio is 2. What is the first term?",
        "solution": [
            "Use the formula $T_n = ar^{n-1}$. $T_3 = a \\times 2^{3-1} = 12$.",
            "$a \\times 2^2 = 12 \\implies a \\times 4 = 12$.",
            "Divide by 4: $a = 3$.",
            "Answer: 3"
        ],
        "distractors": [
            "Answer: 6",
            "Answer: 1.5",
            "Answer: 24"
        ],
        "category": "Sequences",
        "difficulty": "Hard"
    },
    {
        "text": "Calculate: 3 + 7",
        "solution": [
            "Add 3 and 7",
            "Answer: 10"
        ],
        "distractors": [
            "Answer: -4",
            "Answer: 21",
            "Answer: 12"
        ],
        "category": "Operations",
        "difficulty": "Easy"
    },
    {
        "text": "Calculate: -18 - -8",
        "solution": [
            "Subtract -8 from -18",
            "Answer: -10"
        ],
        "distractors": [
            "Answer: -26",
            "Answer: 10",
            "Answer: -9"
        ],
        "category": "Operations",
        "difficulty": "Easy"
    },
    {
        "text": "Calculate: -5 - -6",
        "solution": [
            "Subtract -6 from -5",
            "Answer: 1"
        ],
        "distractors": [
            "Answer: -11",
            "Answer: -1",
            "Answer: 2"
        ],
        "category": "Operations",
        "difficulty": "Easy"
    },
    {
        "text": "Calculate: -5 + 9",
        "solution": [
            "Add -5 and 9",
            "Answer: 4"
        ],
        "distractors": [
            "Answer: -14",
            "Answer: -45",
            "Answer: 6"
        ],
        "category": "Operations",
        "difficulty": "Easy"
    },
  {
    "text": "Calculate: 25 + 37",
    "solution": [
      "25 + 37 = 62",
      "Answer: 62"
    ],
    "distractors": [
      "Answer: 52",
      "Answer: 63",
      "Answer: 60"
    ],
    "category": "Integers",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 84 - 29",
    "solution": [
      "84 - 29 = 55",
      "Answer: 55"
    ],
    "distractors": [
      "Answer: 45",
      "Answer: 56",
      "Answer: 54"
    ],
    "category": "Integers",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 18 × 7",
    "solution": [
      "18 × 7 = 126",
      "Answer: 126"
    ],
    "distractors": [
      "Answer: 136",
      "Answer: 108",
      "Answer: 124"
    ],
    "category": "Operations",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 96 ÷ 12",
    "solution": [
      "96 ÷ 12 = 8",
      "Answer: 8"
    ],
    "distractors": [
      "Answer: 12",
      "Answer: 6",
      "Answer: 9"
    ],
    "category": "Operations",
    "difficulty": "Easy"
  },
  {
    "text": "Is 37 a prime number?",
    "solution": [
      "37 only has two factors: 1 and 37",
      "Answer: Yes"
    ],
    "distractors": [
      "Answer: No, it is divisible by 3",
      "Answer: No, it is divisible by 7",
      "Answer: No, it is divisible by 9"
    ],
    "category": "Prime Numbers",
    "difficulty": "Medium"
  },
  {
    "text": "Find the LCM of 12 and 18",
    "solution": [
      "Multiples of 12: 12, 24, 36...",
      "Multiples of 18: 18, 36...",
      "Least common multiple = 36",
      "Answer: 36"
    ],
    "distractors": [
      "Answer: 24",
      "Answer: 30",
      "Answer: 48"
    ],
    "category": "Multiples",
    "difficulty": "Medium"
  },
  {
    "text": "Round 456 to the nearest ten",
    "solution": [
      "456's units digit is 6 → round up",
      "Answer: 460"
    ],
    "distractors": [
      "Answer: 450",
      "Answer: 400",
      "Answer: 500"
    ],
    "category": "Rounding",
    "difficulty": "Easy"
  },
  {
    "text": "Round 328 to the nearest hundred",
    "solution": [
      "328's tens digit is 2 (<5) → round down",
      "Answer: 300"
    ],
    "distractors": [
      "Answer: 320",
      "Answer: 330",
      "Answer: 400"
    ],
    "category": "Rounding",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: -5 + 9",
    "solution": [
      "-5 + 9 = 4",
      "Answer: 4"
    ],
    "distractors": [
      "Answer: -14",
      "Answer: -45",
      "Answer: 6"
    ],
    "category": "Integers",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: -12 − (−7)",
    "solution": [
      "-12 − (−7) = -12 + 7",
      "-12 + 7 = -5",
      "Answer: -5"
    ],
    "distractors": [
      "Answer: -19",
      "Answer: 19",
      "Answer: 5"
    ],
    "category": "Integers",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: -8 × -6",
    "solution": [
      "Negative × Negative = Positive",
      "8 × 6 = 48",
      "Answer: 48"
    ],
    "distractors": [
      "Answer: -48",
      "Answer: 14",
      "Answer: -14"
    ],
    "category": "Integers",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: -56 ÷ 7",
    "solution": [
      "-56 ÷ 7 = -8",
      "Answer: -8"
    ],
    "distractors": [
      "Answer: 8",
      "Answer: -7",
      "Answer: 7"
    ],
    "category": "Integers",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 2/3 + 1/6",
    "solution": [
      "2/3 = 4/6",
      "4/6 + 1/6 = 5/6",
      "Answer: 5/6"
    ],
    "distractors": [
      "Answer: 3/9",
      "Answer: 1/2",
      "Answer: 7/6"
    ],
    "category": "Fractions",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 7/8 − 3/8",
    "solution": [
      "7/8 − 3/8 = 4/8",
      "4/8 = 1/2",
      "Answer: 1/2"
    ],
    "distractors": [
      "Answer: 3/8",
      "Answer: 5/8",
      "Answer: 2/8"
    ],
    "category": "Fractions",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 3/5 × 10",
    "solution": [
      "3/5 × 10 = 30/5 = 6",
      "Answer: 6"
    ],
    "distractors": [
      "Answer: 5",
      "Answer: 8",
      "Answer: 10"
    ],
    "category": "Fractions",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: (2/3) ÷ (4/5)",
    "solution": [
      "2/3 ÷ 4/5 = 2/3 × 5/4 = 10/12",
      "10/12 = 5/6",
      "Answer: 5/6"
    ],
    "distractors": [
      "Answer: 6/5",
      "Answer: 2/15",
      "Answer: 8/15"
    ],
    "category": "Fractions",
    "difficulty": "Hard"
  },
  {
    "text": "Write 0.75 as a fraction",
    "solution": [
      "0.75 = 75/100 = 3/4",
      "Answer: 3/4"
    ],
    "distractors": [
      "Answer: 2/3",
      "Answer: 7/10",
      "Answer: 1/2"
    ],
    "category": "Decimals",
    "difficulty": "Easy"
  },
  {
    "text": "Write 3/8 as a decimal",
    "solution": [
      "3 ÷ 8 = 0.375",
      "Answer: 0.375"
    ],
    "distractors": [
      "Answer: 0.35",
      "Answer: 0.385",
      "Answer: 0.33"
    ],
    "category": "Decimals",
    "difficulty": "Medium"
  },
  {
    "text": "Round 4.678 to 2 decimal places",
    "solution": [
      "4.678 → 4.68",
      "Answer: 4.68"
    ],
    "distractors": [
      "Answer: 4.67",
      "Answer: 4.70",
      "Answer: 4.60"
    ],
    "category": "Decimals",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 12.5 + 3.75",
    "solution": [
      "12.5 + 3.75 = 16.25",
      "Answer: 16.25"
    ],
    "distractors": [
      "Answer: 15.25",
      "Answer: 16.35",
      "Answer: 17.25"
    ],
    "category": "Decimals",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 7.2 − 4.89",
    "solution": [
      "7.2 − 4.89 = 2.31",
      "Answer: 2.31"
    ],
    "distractors": [
      "Answer: 3.21",
      "Answer: 2.21",
      "Answer: 2.41"
    ],
    "category": "Decimals",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 6.4 × 0.5",
    "solution": [
      "6.4 × 0.5 = 3.2",
      "Answer: 3.2"
    ],
    "distractors": [
      "Answer: 32",
      "Answer: 0.32",
      "Answer: 2.8"
    ],
    "category": "Decimals",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 9 ÷ 0.25",
    "solution": [
      "9 ÷ 0.25 = 36",
      "Answer: 36"
    ],
    "distractors": [
      "Answer: 45",
      "Answer: 3.6",
      "Answer: 18"
    ],
    "category": "Decimals",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 15% of 240",
    "solution": [
      "15% = 15/100",
      "15/100 × 240 = 36",
      "Answer: 36"
    ],
    "distractors": [
      "Answer: 35",
      "Answer: 32",
      "Answer: 40"
    ],
    "category": "Percentage",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: If 4 apples cost R12, what is the cost of 10 apples?",
    "solution": [
      "R12 ÷ 4 = R3 per apple",
      "10 × R3 = R30",
      "Answer: R30"
    ],
    "distractors": [
      "Answer: R28",
      "Answer: R36",
      "Answer: R32"
    ],
    "category": "Ratio",
    "difficulty": "Hard"
  },
  {
    "text": "Calculate: 145 + 286",
    "solution": [
      "145 + 286 = 431",
      "Answer: 431"
    ],
    "distractors": [
      "Answer: 421",
      "Answer: 441",
      "Answer: 423"
    ],
    "category": "Integers",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 1000 − 457",
    "solution": [
      "1000 − 457 = 543",
      "Answer: 543"
    ],
    "distractors": [
      "Answer: 537",
      "Answer: 453",
      "Answer: 553"
    ],
    "category": "Integers",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 24 × 15",
    "solution": [
      "24 × 15 = 360",
      "Answer: 360"
    ],
    "distractors": [
      "Answer: 350",
      "Answer: 370",
      "Answer: 380"
    ],
    "category": "Operations",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 720 ÷ 8",
    "solution": [
      "720 ÷ 8 = 90",
      "Answer: 90"
    ],
    "distractors": [
      "Answer: 80",
      "Answer: 95",
      "Answer: 85"
    ],
    "category": "Operations",
    "difficulty": "Easy"
  },
  {
    "text": "Find the GCF of 16 and 24",
    "solution": [
      "Factors of 16: 1, 2, 4, 8, 16",
      "Factors of 24: 1, 2, 3, 4, 6, 8, 12, 24",
      "Greatest common factor = 8",
      "Answer: 8"
    ],
    "distractors": [
      "Answer: 4",
      "Answer: 12",
      "Answer: 16"
    ],
    "category": "Factors",
    "difficulty": "Medium"
  },
  {
    "text": "Round 783 to the nearest hundred",
    "solution": [
      "783's tens digit is 8 (>5) → round up",
      "Answer: 800"
    ],
    "distractors": [
      "Answer: 780",
      "Answer: 700",
      "Answer: 880"
    ],
    "category": "Rounding",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: -4 × -12",
    "solution": [
      "Negative × Negative = Positive",
      "4 × 12 = 48",
      "Answer: 48"
    ],
    "distractors": [
      "Answer: -48",
      "Answer: 16",
      "Answer: -16"
    ],
    "category": "Integers",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: -48 ÷ -12",
    "solution": [
      "Negative ÷ Negative = Positive",
      "48 ÷ 12 = 4",
      "Answer: 4"
    ],
    "distractors": [
      "Answer: -4",
      "Answer: 36",
      "Answer: -12"
    ],
    "category": "Integers - Division",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 3/4 + 5/8",
    "solution": [
      "Make denominators equal: 3/4 = 6/8",
      "6/8 + 5/8 = 11/8",
      "Answer: 11/8 or 1 3/8"
    ],
    "distractors": [
      "Answer: 8/12",
      "Answer: 2/8",
      "Answer: 9/8"
    ],
    "category": "Fractions - Addition",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 7/10 − 2/5",
    "solution": [
      "2/5 = 4/10",
      "7/10 − 4/10 = 3/10",
      "Answer: 3/10"
    ],
    "distractors": [
      "Answer: 5/10",
      "Answer: 1/2",
      "Answer: 9/10"
    ],
    "category": "Fractions - Subtraction",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 5/6 × 3/4",
    "solution": [
      "Numerators: 5×3=15",
      "Denominators: 6×4=24",
      "15/24 = 5/8",
      "Answer: 5/8"
    ],
    "distractors": [
      "Answer: 15/18",
      "Answer: 8/5",
      "Answer: 2/3"
    ],
    "category": "Fractions - Multiplication",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 7/9 ÷ 2/3",
    "solution": [
      "Divide by a fraction = multiply by its reciprocal",
      "7/9 × 3/2 = 21/18 = 7/6",
      "Answer: 7/6 or 1 1/6"
    ],
    "distractors": [
      "Answer: 14/27",
      "Answer: 5/6",
      "Answer: 3/5"
    ],
    "category": "Fractions - Division",
    "difficulty": "Hard"
  },
  {
    "text": "Arrange in order from smallest to largest: 1/2, 2/3, 3/4",
    "solution": [
      "Make denominators equal or compare decimal form",
      "1/2=0.5, 2/3≈0.67, 3/4=0.75",
      "Order: 1/2, 2/3, 3/4"
    ],
    "distractors": [
      "Order: 3/4, 2/3, 1/2",
      "Order: 2/3, 1/2, 3/4",
      "Order: 1/2, 3/4, 2/3"
    ],
    "category": "Fractions - Comparison",
    "difficulty": "Easy"
  },
  {
    "text": "Solve: 2/5 of 30",
    "solution": [
      "(2/5) × 30 = 60/5",
      "Answer: 12"
    ],
    "distractors": [
      "Answer: 6",
      "Answer: 10",
      "Answer: 15"
    ],
    "category": "Fractions - Problem Solving",
    "difficulty": "Easy"
  },
  {
    "text": "Write 0.375 as a fraction in simplest form",
    "solution": [
      "0.375 = 375/1000",
      "Simplify: 3/8",
      "Answer: 3/8"
    ],
    "distractors": [
      "Answer: 37/50",
      "Answer: 5/8",
      "Answer: 7/16"
    ],
    "category": "Decimals - Conversion",
    "difficulty": "Medium"
  },
  {
    "text": "Write 7/20 as a decimal",
    "solution": [
      "7 ÷ 20 = 0.35",
      "Answer: 0.35"
    ],
    "distractors": [
      "Answer: 0.75",
      "Answer: 0.7",
      "Answer: 0.25"
    ],
    "category": "Decimals - Conversion",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 4.75 + 3.6",
    "solution": [
      "4.75 + 3.6 = 8.35",
      "Answer: 8.35"
    ],
    "distractors": [
      "Answer: 7.35",
      "Answer: 9.35",
      "Answer: 7.25"
    ],
    "category": "Decimals - Addition",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 9.2 − 4.85",
    "solution": [
      "9.20 − 4.85 = 4.35",
      "Answer: 4.35"
    ],
    "distractors": [
      "Answer: 3.35",
      "Answer: 5.35",
      "Answer: 4.25"
    ],
    "category": "Decimals - Subtraction",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 1.25 × 0.4",
    "solution": [
      "1.25 × 0.4 = 0.50",
      "Answer: 0.50"
    ],
    "distractors": [
      "Answer: 5.00",
      "Answer: 0.45",
      "Answer: 0.125"
    ],
    "category": "Decimals - Multiplication",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: 9 ÷ 0.3",
    "solution": [
      "9 ÷ 0.3 = 90 ÷ 3 = 30",
      "Answer: 30"
    ],
    "distractors": [
      "Answer: 3",
      "Answer: 27",
      "Answer: 0.33"
    ],
    "category": "Decimals - Division",
    "difficulty": "Medium"
  },
  {
    "text": "Round 56.789 to 1 decimal place",
    "solution": [
      "56.789 ≈ 56.8",
      "Answer: 56.8"
    ],
    "distractors": [
      "Answer: 56.7",
      "Answer: 57",
      "Answer: 56.9"
    ],
    "category": "Decimals - Rounding",
    "difficulty": "Easy"
  },
  {
    "text": "Solve: 25% of 320",
    "solution": [
      "25% = 1/4",
      "1/4 × 320 = 80",
      "Answer: 80"
    ],
    "distractors": [
      "Answer: 60",
      "Answer: 85",
      "Answer: 75"
    ],
    "category": "Percentage",
    "difficulty": "Easy"
  },
  {
    "text": "If 3 apples cost R12, what is the cost of 8 apples?",
    "solution": [
      "1 apple = R4",
      "8 apples × R4 = R32",
      "Answer: R32"
    ],
    "distractors": [
      "Answer: R30",
      "Answer: R28",
      "Answer: R24"
    ],
    "category": "Ratio and Rate",
    "difficulty": "Medium"
  },
  {
    "text": "Solve: 18 is what percentage of 45?",
    "solution": [
      "18 ÷ 45 = 0.4",
      "0.4 × 100 = 40%",
      "Answer: 40%"
    ],
    "distractors": [
      "Answer: 45%",
      "Answer: 50%",
      "Answer: 30%"
    ],
    "category": "Percentage",
    "difficulty": "Hard"
  },
  {
    "text": "Calculate: The area of a triangle with base 12 cm and height 8 cm.",
    "solution": [
      "Area = (1/2) × base × height",
      "Area = (1/2) × 12 × 8 = 48 cm²",
      "Answer: 48 cm²"
    ],
    "distractors": [
      "Answer: 96 cm²",
      "Answer: 20 cm²",
      "Answer: 40 cm²"
    ],
    "category": "Area",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: The perimeter of a square with side length 9 cm.",
    "solution": [
      "Perimeter = 4 × side",
      "Perimeter = 4 × 9 = 36 cm",
      "Answer: 36 cm"
    ],
    "distractors": [
      "Answer: 81 cm",
      "Answer: 18 cm",
      "Answer: 27 cm"
    ],
    "category": "Perimeter",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate: The volume of a rectangular prism with length 5 cm, width 6 cm and height 7 cm.",
    "solution": [
      "Volume = length × width × height",
      "Volume = 5 × 6 × 7 = 210 cm³",
      "Answer: 210 cm³"
    ],
    "distractors": [
      "Answer: 180 cm³",
      "Answer: 240 cm³",
      "Answer: 280 cm³"
    ],
    "category": "Volume",
    "difficulty": "Medium"
  },
  {
    "text": "Simplify: 5x + 3y + 2x - y",
    "solution": [
      "Group like terms: (5x + 2x) + (3y - y)",
      "Simplify: 7x + 2y",
      "Answer: 7x + 2y"
    ],
    "distractors": [
      "Answer: 7x + 4y",
      "Answer: 3x + 2y",
      "Answer: 7x + y"
    ],
    "category": "Algebraic Expressions",
    "difficulty": "Medium"
  },
  {
    "text": "Expand: 3(4x - 5)",
    "solution": [
      "3 × 4x = 12x",
      "3 × -5 = -15",
      "Answer: 12x - 15"
    ],
    "distractors": [
      "Answer: 12x + 15",
      "Answer: 7x - 5",
      "Answer: 12x + 5"
    ],
    "category": "Algebraic Expressions",
    "difficulty": "Easy"
  },
  {
    "text": "Simplify: 2x² × 5x³",
    "solution": [
      "2 × 5 = 10, x² × x³ = x⁵",
      "Answer: 10x⁵"
    ],
    "distractors": [
      "Answer: 7x⁵",
      "Answer: 10x⁶",
      "Answer: 10x²"
    ],
    "category": "Algebraic Expressions",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate: 5⁴",
    "solution": [
      "5 × 5 × 5 × 5 = 625",
      "Answer: 625"
    ],
    "distractors": [
      "Answer: 20",
      "Answer: 25",
      "Answer: 125"
    ],
    "category": "Exponents",
    "difficulty": "Easy"
  },
  {
    "text": "Write 450000 in scientific notation",
    "solution": [
      "Move the decimal point 5 places to the left",
      "Answer: 4.5 × 10⁵"
    ],
    "distractors": [
      "Answer: 45 × 10⁴",
      "Answer: 0.45 × 10⁶",
      "Answer: 4.5 × 10⁶"
    ],
    "category": "Scientific Notation",
    "difficulty": "Easy"
  },
  {
    "text": "Solve for x: x + 7 = 11",
    "solution": [
      "x = 11 - 7",
      "Answer: x = 4"
    ],
    "distractors": [
      "Answer: x = 18",
      "Answer: x = 5",
      "Answer: x = 3"
    ],
    "category": "Linear Equations",
    "difficulty": "Easy"
  },
  {
    "text": "Solve for x: 3x - 5 = 10",
    "solution": [
      "3x = 10 + 5",
      "3x = 15",
      "x = 5",
      "Answer: x = 5"
    ],
    "distractors": [
      "Answer: x = 15",
      "Answer: x = 3",
      "Answer: x = 4"
    ],
    "category": "Linear Equations",
    "difficulty": "Easy"
  },
  {
    "text": "Solve for x: 2(x + 3) = 14",
    "solution": [
      "x + 3 = 14 ÷ 2",
      "x + 3 = 7",
      "x = 7 – 3",
      "Answer: x = 4"
    ],
    "distractors": [
      "Answer: x = 5",
      "Answer: x = 3",
      "Answer: x = 7"
    ],
    "category": "Linear Equations",
    "difficulty": "Medium"
  },
  {
    "text": "Solve for t: 4t/5 = 12",
    "solution": [
      "Multiply both sides by 5: 4t = 60",
      "t = 60 ÷ 4",
      "Answer: t = 15"
    ],
    "distractors": [
      "Answer: t = 20",
      "Answer: t = 12",
      "Answer: t = 18"
    ],
    "category": "Linear Equations",
    "difficulty": "Medium"
  },
  {
    "text": "Solve word problem: If 3x + 5 = 20, what is x?",
    "solution": [
      "3x = 20 – 5",
      "3x = 15",
      "x = 5",
      "Answer: 5"
    ],
    "distractors": [
      "Answer: 4",
      "Answer: 6",
      "Answer: 7"
    ],
    "category": "Word Problems",
    "difficulty": "Medium"
  },
  {
    "text": "Simplify: 4x + 3 − 7",
    "solution": [
      "Combine the numbers: 3 − 7 = −4",
      "Answer: 4x − 4"
    ],
    "distractors": [
      "Answer: 4x + 4",
      "Answer: 4x + 10",
      "Answer: 4x − 7"
    ],
    "category": "Algebraic Expressions",
    "difficulty": "Easy"
  },
  {
    "text": "Simplify: 7a + 6b − 3a + 2b",
    "solution": [
      "7a − 3a = 4a, 6b + 2b = 8b",
      "Answer: 4a + 8b"
    ],
    "distractors": [
      "Answer: 10a + 8b",
      "Answer: 4a + 6b",
      "Answer: 7a + 6b"
    ],
    "category": "Algebraic Expressions",
    "difficulty": "Medium"
  },
  {
    "text": "Multiply: 4x × 6x²",
    "solution": [
      "4 × 6 = 24, x¹ × x² = x³",
      "Answer: 24x³"
    ],
    "distractors": [
      "Answer: 10x³",
      "Answer: 24x²",
      "Answer: 4x³"
    ],
    "category": "Algebraic Expressions - Multiplication",
    "difficulty": "Medium"
  },
  {
    "text": "Divide: 24x³ ÷ 8x",
    "solution": [
      "24 ÷ 8 = 3, x³ ÷ x = x²",
      "Answer: 3x²"
    ],
    "distractors": [
      "Answer: 3x³",
      "Answer: 16x²",
      "Answer: 3x³"
    ],
    "category": "Algebraic Expressions - Division",
    "difficulty": "Medium"
  },
  {
    "text": "Solve: 6x + 5 = 23",
    "solution": [
      "6x = 23 − 5",
      "6x = 18",
      "x = 18 ÷ 6",
      "Answer: x = 3"
    ],
    "distractors": [
      "Answer: x = 4",
      "Answer: x = 2",
      "Answer: x = 5"
    ],
    "category": "Linear Equations",
    "difficulty": "Easy"
  },
  {
    "text": "Solve: 7 − 3y = 1",
    "solution": [
      "-3y = 1 − 7",
      "-3y = −6",
      "y = −6 ÷ −3",
      "Answer: y = 2"
    ],
    "distractors": [
      "Answer: y = −2",
      "Answer: y = 3",
      "Answer: y = −3"
    ],
    "category": "Linear Equations",
    "difficulty": "Easy"
  },
  {
    "text": "Solve: 5(x + 4) = 25",
    "solution": [
      "x + 4 = 25 ÷ 5",
      "x + 4 = 5",
      "x = 1",
      "Answer: x = 1"
    ],
    "distractors": [
      "Answer: x = 2",
      "Answer: x = 3",
      "Answer: x = 0"
    ],
    "category": "Linear Equations",
    "difficulty": "Medium"
  },
  {
    "text": "Word problem: Three times a number plus 7 is 22. Find the number.",
    "solution": [
      "3x + 7 = 22",
      "3x = 15",
      "x = 5",
      "Answer: 5"
    ],
    "distractors": [
      "Answer: 4",
      "Answer: 6",
      "Answer: 7"
    ],
    "category": "Word Problems",
    "difficulty": "Medium"
  },
  {
    "text": "Plot the point (−2, 5) on the Cartesian plane.",
    "solution": [
      "Move 2 units left along x-axis and 5 units up along y-axis",
      "Mark point: (−2, 5)"
    ],
    "distractors": [
      "Answer: (2, −5)",
      "Answer: (−5, 2)",
      "Answer: (2, 5)"
    ],
    "category": "Graphs - Point Plotting",
    "difficulty": "Easy"
  },
  {
    "text": "Plot the point (0, −5) on the Cartesian plane.",
    "solution": [
      "x = 0 (on the y-axis)",
      "Move 5 units down along the y-axis",
      "Mark point: (0, −5)"
    ],
    "distractors": [
      "Answer: (5, 0)",
      "Answer: (−5, 0)",
      "Answer: (0, 5)"
    ],
    "category": "Graphs - Point Plotting",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate the surface area of a cube with side 5 cm long.",
    "solution": [
      "Area = 6 × side² = 6 × 5² = 6 × 25 = 150 cm²",
      "Answer: 150 cm²"
    ],
    "distractors": [
      "Answer: 125 cm²",
      "Answer: 100 cm²",
      "Answer: 140 cm²"
    ],
    "category": "Surface Area - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the volume of a cube with side 7 cm long.",
    "solution": [
      "Volume = side³ = 7³ = 7 × 7 × 7 = 343 cm³",
      "Answer: 343 cm³"
    ],
    "distractors": [
      "Answer: 21 cm³",
      "Answer: 49 cm³",
      "Answer: 243 cm³"
    ],
    "category": "Volume - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the surface area of a rectangular prism with length 10 cm, width 5 cm and height 2 cm.",
    "solution": [
      "Surface area = 2(lw + lh + wh)",
      "SA = 2(10×5 + 10×2 + 5×2) = 2(50 + 20 + 10) = 2(80) = 160 cm²",
      "Answer: 160 cm²"
    ],
    "distractors": [
      "Answer: 100 cm²",
      "Answer: 150 cm²",
      "Answer: 180 cm²"
    ],
    "category": "Surface Area - 3D",
    "difficulty": "Hard"
  },
  {
    "text": "Calculate the surface area of a cylinder with radius 5 cm and height 10 cm (π≈3,14).",
    "solution": [
      "Area = 2πr² + 2πrh",
      "SA = 2×3,14×5² + 2×3,14×5×10 = 2×3,14×25 + 2×3,14×50",
      "SA = 157 + 314 = 471 cm²",
      "Answer: 471 cm²"
    ],
    "distractors": [
      "Answer: 450 cm²",
      "Answer: 460 cm²",
      "Answer: 480 cm²"
    ],
    "category": "Surface Area - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the volume of a cylinder with radius 6 cm and height 8 cm (π≈3,14).",
    "solution": [
      "Volume = πr²h = 3,14×6²×8 = 3,14×36×8 ≈ 904,32 cm³",
      "Answer: 904,32 cm³"
    ],
    "distractors": [
      "Answer: 900 cm³",
      "Answer: 910 cm³",
      "Answer: 905 cm³"
    ],
    "category": "Volume - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "What is the mode of the data set: 5, 7, 7, 8, 9, 10?",
    "solution": [
      "Mode = 7 (appears most often)",
      "Answer: 7"
    ],
    "distractors": [
      "Answer: 8",
      "Answer: 9",
      "Answer: 10"
    ],
    "category": "Data Handling - Central Tendency",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate the mean of 8, 12, 15, 20.",
    "solution": [
      "Mean = (8+12+15+20)/4 = 55/4 = 13.75",
      "Answer: 13.75"
    ],
    "distractors": [
      "Answer: 13.5",
      "Answer: 14",
      "Answer: 13"
    ],
    "category": "Data Handling - Mean",
    "difficulty": "Easy"
  },
  {
    "text": "Find the median of the series: 7, 9, 11, 13, 15.",
    "solution": [
      "Median = middle value = 11",
      "Answer: 11"
    ],
    "distractors": [
      "Answer: 10",
      "Answer: 12",
      "Answer: 9"
    ],
    "category": "Data Handling - Median",
    "difficulty": "Easy"
  },
  {
    "text": "What is the probability of drawing a red ball from a bag with 2 red, 3 blue and 5 green balls?",
    "solution": [
      "Probability = favorable / total = 2/10 = 1/5",
      "Answer: 1/5"
    ],
    "distractors": [
      "Answer: 1/2",
      "Answer: 1/3",
      "Answer: 1/10"
    ],
    "category": "Probability",
    "difficulty": "Easy"
  },
  {
    "text": "What is the probability of rolling a 4 or 5 on a die?",
    "solution": [
      "Probability = 2 favorable outcomes / 6 = 1/3",
      "Answer: 1/3"
    ],
    "distractors": [
      "Answer: 1/2",
      "Answer: 1/4",
      "Answer: 1/6"
    ],
    "category": "Probability",
    "difficulty": "Easy"
  },
  {
    "text": "Translate the point (−5,−2) 6 units to the right and 3 units up.",
    "solution": [
      "New point = (−5+6,−2+3) = (1,1)",
      "Answer: (1,1)"
    ],
    "distractors": [
      "Answer: (−1,1)",
      "Answer: (0,1)",
      "Answer: (1,0)"
    ],
    "category": "Transformations - Translations",
    "difficulty": "Easy"
  },
  {
    "text": "Reflect the point (7,−4) over the x-axis.",
    "solution": [
      "Reflection over x-axis = (7,4)",
      "Answer: (7,4)"
    ],
    "distractors": [
      "Answer: (−7,4)",
      "Answer: (7,−4)",
      "Answer: (−7,−4)"
    ],
    "category": "Transformations - Reflections",
    "difficulty": "Easy"
  },
  {
    "text": "Rotate the point (−3,−8) 90° clockwise around the origin.",
    "solution": [
      "New point = (−8, 3)",
      "Answer: (−8, 3)"
    ],
    "distractors": [
      "Answer: (−3, 8)",
      "Answer: (3, 8)",
      "Answer: (8, −3)"
    ],
    "category": "Transformations - Rotations",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the surface area of a cone with radius 4 cm and slant height 7 cm (π≈3,14).",
    "solution": [
      "Surface area = πr(r+l) = 3,14×4(4+7) = 12,56(11) ≈ 138,16 cm²",
      "Answer: 138,16 cm²"
    ],
    "distractors": [
      "Answer: 120 cm²",
      "Answer: 130 cm²",
      "Answer: 150 cm²"
    ],
    "category": "Surface Area - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the surface area of a sphere with radius 8 cm (π≈3,14).",
    "solution": [
      "Surface area = 4πr² = 4×3,14×8² = 4×3,14×64 ≈ 803,84 cm²",
      "Answer: 803,84 cm²"
    ],
    "distractors": [
      "Answer: 800 cm²",
      "Answer: 810 cm²",
      "Answer: 805 cm²"
    ],
    "category": "Surface Area - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the volume of a cone with radius 5 cm and height 12 cm (π≈3,14).",
    "solution": [
      "Volume = (1/3)πr²h = (1/3)×3,14×5²×12 = (1/3)×3,14×25×12 ≈ 314 cm³",
      "Answer: 314 cm³"
    ],
    "distractors": [
      "Answer: 300 cm³",
      "Answer: 320 cm³",
      "Answer: 350 cm³"
    ],
    "category": "Volume - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the volume of a sphere with radius 6 cm (π≈3,14).",
    "solution": [
      "Volume = (4/3)πr³ = (4/3)×3,14×6³ = (4/3)×3,14×216 ≈ 904.32 cm³",
      "Answer: 904.32 cm³"
    ],
    "distractors": [
      "Answer: 900 cm³",
      "Answer: 910 cm³",
      "Answer: 905 cm³"
    ],
    "category": "Volume - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "What is the mode of the data set: 6, 8, 8, 9, 10, 10, 10?",
    "solution": [
      "Mode = 10",
      "Answer: 10"
    ],
    "distractors": [
      "Answer: 8",
      "Answer: 9",
      "Answer: 6"
    ],
    "category": "Data Handling - Central Tendency",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate the mean of 2, 5, 8, 11, 14.",
    "solution": [
      "Mean = (2+5+8+11+14)/5 = 40/5 = 8",
      "Answer: 8"
    ],
    "distractors": [
      "Answer: 7",
      "Answer: 9",
      "Answer: 8.5"
    ],
    "category": "Data Handling - Mean",
    "difficulty": "Easy"
  },
  {
    "text": "Find the median of the series: 1, 3, 5, 7, 9, 11, 13.",
    "solution": [
      "Median = middle value = 7",
      "Answer: 7"
    ],
    "distractors": [
      "Answer: 6",
      "Answer: 8",
      "Answer: 5"
    ],
    "category": "Data Handling - Median",
    "difficulty": "Easy"
  },
  {
    "text": "What is the probability of choosing a red or blue ball from a bag with 3 red, 2 blue and 5 green balls?",
    "solution": [
      "Probability = (3+2)/10 = 5/10 = 1/2",
      "Answer: 1/2"
    ],
    "distractors": [
      "Answer: 1/3",
      "Answer: 1/4",
      "Answer: 2/3"
    ],
    "category": "Probability",
    "difficulty": "Easy"
  },
  {
    "text": "If the probability of an event is 0.35, express it as a percentage.",
    "solution": [
      "0.35 × 100% = 35%",
      "Answer: 35%"
    ],
    "distractors": [
      "Answer: 30%",
      "Answer: 40%",
      "Answer: 32%"
    ],
    "category": "Probability",
    "difficulty": "Easy"
  },
  {
    "text": "Translate the point (−2,4) 3 units to the left and 6 units down.",
    "solution": [
      "New point = (−2−3,4−6) = (−5,−2)",
      "Answer: (−5,−2)"
    ],
    "distractors": [
      "Answer: (−5,2)",
      "Answer: (−4,−3)",
      "Answer: (−6,−2)"
    ],
    "category": "Transformations - Translations",
    "difficulty": "Easy"
  },
  {
    "text": "Reflect the point (4,−7) over the y-axis.",
    "solution": [
      "Reflection over y-axis = (−4,−7)",
      "Answer: (−4,−7)"
    ],
    "distractors": [
      "Answer: (4,7)",
      "Answer: (−4,7)",
      "Answer: (4,−7)"
    ],
    "category": "Transformations - Reflections",
    "difficulty": "Easy"
  },
  {
    "text": "Rotate the point (−6,2) 180° around the origin.",
    "solution": [
      "New point = (6,−2)",
      "Answer: (6,−2)"
    ],
    "distractors": [
      "Answer: (−6,−2)",
      "Answer: (6,2)",
      "Answer: (−2,6)"
    ],
    "category": "Transformations - Rotations",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the surface area of a cube with side 12 cm long.",
    "solution": [
      "Surface area = 6 × 12² = 6 × 144 = 864 cm²",
      "Answer: 864 cm²"
    ],
    "distractors": [
      "Answer: 850 cm²",
      "Answer: 860 cm²",
      "Answer: 870 cm²"
    ],
    "category": "Surface Area - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the volume of a rectangular prism with length 6 cm, width 7 cm and height 9 cm.",
    "solution": [
      "Volume = 6×7×9 = 378 cm³",
      "Answer: 378 cm³"
    ],
    "distractors": [
      "Answer: 370 cm³",
      "Answer: 380 cm³",
      "Answer: 385 cm³"
    ],
    "category": "Volume - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the surface area of a cylinder with radius 8 cm and height 10 cm (π≈3,14).",
    "solution": [
      "Surface area = 2πr² + 2πrh = 2×3,14×64 + 2×3,14×8×10 ≈ 401,92 + 502,4 = 904.32 cm²",
      "Answer: 904.32 cm²"
    ],
    "distractors": [
      "Answer: 900 cm²",
      "Answer: 910 cm²",
      "Answer: 905 cm²"
    ],
    "category": "Surface Area - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "Calculate the volume of a cylinder with radius 5 cm and height 14 cm (π≈3,14).",
    "solution": [
      "Volume = πr²h = 3,14×25×14 ≈ 1099 cm³",
      "Answer: 1099 cm³"
    ],
    "distractors": [
      "Answer: 1100 cm³",
      "Answer: 1095 cm³",
      "Answer: 1085 cm³"
    ],
    "category": "Volume - 3D",
    "difficulty": "Medium"
  },
  {
    "text": "What is the mode of the data set: 1, 2, 2, 3, 3, 3, 4, 5.",
    "solution": [
      "Mode = 3",
      "Answer: 3"
    ],
    "distractors": [
      "Answer: 2",
      "Answer: 1",
      "Answer: 4"
    ],
    "category": "Data Handling - Central Tendency",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate the mean of 7, 9, 11, 13, 15.",
    "solution": [
      "Mean = (7+9+11+13+15)/5 = 55/5 = 11",
      "Answer: 11"
    ],
    "distractors": [
      "Answer: 10",
      "Answer: 12",
      "Answer: 13"
    ],
    "category": "Data Handling - Mean",
    "difficulty": "Easy"
  },
  {
    "text": "Find the median of the series: 3, 6, 9, 12, 15, 18.",
    "solution": [
      "Median = average of the two middle numbers = (9+12)/2 = 10.5",
      "Answer: 10.5"
    ],
    "distractors": [
      "Answer: 10",
      "Answer: 11",
      "Answer: 12"
    ],
    "category": "Data Handling - Median",
    "difficulty": "Easy"
  },
  {
    "text": "What is the probability of rolling a 4 or 6 on a die?",
    "solution": [
      "Probability = 2/6 = 1/3",
      "Answer: 1/3"
    ],
    "distractors": [
      "Answer: 1/2",
      "Answer: 1/4",
      "Answer: 1/6"
    ],
    "category": "Probability",
    "difficulty": "Easy"
  },
  {
    "text": "If the probability of an event is 0.25, express it as a percentage.",
    "solution": [
      "0.25 × 100% = 25%",
      "Answer: 25%"
    ],
    "distractors": [
      "Answer: 20%",
      "Answer: 30%",
      "Answer: 35%"
    ],
    "category": "Probability",
    "difficulty": "Easy"
  },
  {
    "text": "Translate the point (−1,3) 4 units to the right and 2 units down.",
    "solution": [
      "New point = (−1+4,3−2) = (3,1)",
      "Answer: (3,1)"
    ],
    "distractors": [
      "Answer: (−3,1)",
      "Answer: (3,−1)",
      "Answer: (−1,1)"
    ],
    "category": "Transformations - Translations",
    "difficulty": "Easy"
  },
  {
    "text": "Reflect the point (−5,6) over the x-axis.",
    "solution": [
      "Reflection over x-axis = (−5,−6)",
      "Answer: (−5,−6)"
    ],
    "distractors": [
      "Answer: (5,6)",
      "Answer: (5,−6)",
      "Answer: (−5,6)"
    ],
    "category": "Transformations - Reflections",
    "difficulty": "Easy"
  },
  {
    "text": "Rotate the point (3,−7) 180° around the origin.",
    "solution": [
      "New point = (−3,7)",
      "Answer: (−3,7)"
    ],
    "distractors": [
      "Answer: (3,7)",
      "Answer: (−3,−7)",
      "Answer: (3,−7)"
    ],
    "category": "Transformations - Rotations",
    "difficulty": "Medium"
  },
  {
    "text": "What is the mode of the data set: 1, 2, 2, 3, 3, 3, 4, 5.",
    "solution": [
      "Mode = 3",
      "Answer: 3"
    ],
    "distractors": [
      "Answer: 2",
      "Answer: 1",
      "Answer: 4"
    ],
    "category": "Data Handling - Central Tendency",
    "difficulty": "Easy"
  },
  {
    "text": "Calculate the mean of 7, 9, 11, 13, 15.",
    "solution": [
      "Mean = (7+9+11+13+15)/5 = 55/5 = 11",
      "Answer: 11"
    ],
    "distractors": [
      "Answer: 10",
      "Answer: 12",
      "Answer: 13"
    ],
    "category": "Data Handling - Mean",
    "difficulty": "Easy"
  },
  {
    "text": "Find the median of the series: 3, 6, 9, 12, 15, 18.",
    "solution": [
      "Median = average of the two middle numbers = (9+12)/2 = 10.5",
      "Answer: 10.5"
    ],
    "distractors": [
      "Answer: 10",
      "Answer: 11",
      "Answer: 12"
    ],
    "category": "Data Handling - Median",
    "difficulty": "Easy"
  },
  {
    "text": "What is the probability of rolling a 4 or 6 on a die?",
    "solution": [
      "Probability = 2/6 = 1/3",
      "Answer: 1/3"
    ],
    "distractors": [
      "Answer: 1/2",
      "Answer: 1/4",
      "Answer: 1/6"
    ],
    "category": "Probability",
    "difficulty": "Easy"
  },
  {
    "text": "If the probability of an event is 0.25, express it as a percentage.",
    "solution": [
      "0.25 × 100% = 25%",
      "Answer: 25%"
    ],
    "distractors": [
      "Answer: 20%",
      "Answer: 30%",
      "Answer: 35%"
    ],
    "category": "Probability",
    "difficulty": "Easy"
  },
  {
    "text": "Translate the point (−1,3) 4 units to the right and 2 units down.",
    "solution": [
      "New point = (−1+4,3−2) = (3,1)",
      "Answer: (3,1)"
    ],
    "distractors": [
      "Answer: (−3,1)",
      "Answer: (3,−1)",
      "Answer: (−1,1)"
    ],
    "category": "Transformations - Translations",
    "difficulty": "Easy"
  },
  {
    "text": "Reflect the point (−5,6) over the x-axis.",
    "solution": [
      "Reflection over x-axis = (−5,−6)",
      "Answer: (−5,−6)"
    ],
    "distractors": [
      "Answer: (5,6)",
      "Answer: (5,−6)",
      "Answer: (−5,6)"
    ],
    "category": "Transformations - Reflections",
    "difficulty": "Easy"
  },
  {
    "text": "Rotate the point (3,−7) 180° around the origin.",
    "solution": [
      "New point = (−3,7)",
      "Answer: (−3,7)"
    ],
    "distractors": [
      "Answer: (3,7)",
      "Answer: (−3,−7)",
      "Answer: (3,−7)"
    ],
    "category": "Transformations - Rotations",
    "difficulty": "Medium"
  }
  ];

   const firebaseConfig = {
            apiKey: "AIzaSyAl_inLrHEvA05aRuizjIScPWs8orhaezc",
            authDomain: "eduquestmaths.firebaseapp.com",
            projectId: "eduquestmaths",
            storageBucket: "eduquestmaths.firebasestorage.app",
            messagingSenderId: "38155185854",
            appId: "1:38155185854:web:48e596eb6a39c4bac578ef",
            measurementId: "G-8K5YDC8H6X"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  
  const drawPile = document.getElementById('drawPile');
  const chainSlots = document.getElementById('chainSlots');
  const discardPile = document.getElementById('discardPile');
  const questionTextEl = document.getElementById('questionText');
  const questionHintEl = document.getElementById('questionHint');
  const correctScoreEl = document.getElementById('correctScoreEl');
  const incorrectScoreEl = document.getElementById('incorrectScoreEl');
  const timerEl = document.getElementById('timerEl');
  const categorySelect = document.getElementById('categorySelect');
  const difficultySelect = document.getElementById('difficultySelect');
  const hintBtn = document.getElementById('hintBtn');
  const geminiHintBtn = document.getElementById('geminiHintBtn');
  const speakBtn = document.getElementById('speakBtn');
  const restartBtn = document.getElementById('restartBtn');
  const nextBtn = document.getElementById('nextBtn');
  const userIdDisplay = document.getElementById('userIdDisplay');

  let currentQuestion = null;
  let drawCards = [];
  let chainCards = [];
  let discardCards = [];
  let correctScore = 0;
  let incorrectScore = 0;
  let gameTimer = 60;
  let timerInterval = null;
  let user = null;

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function renderPiles() {
    drawPile.innerHTML = '';
    chainSlots.innerHTML = '';
    discardPile.innerHTML = '';

    drawCards.forEach(card => {
      drawPile.appendChild(createCardElement(card));
    });

    chainCards.forEach((card, index) => {
      const slot = document.createElement('div');
      slot.classList.add('card-slot');
      slot.dataset.index = index;
      if (card) {
        slot.appendChild(createCardElement(card));
        slot.classList.add('correct');
      } else {
        slot.addEventListener('dragover', e => e.preventDefault());
        slot.addEventListener('drop', handleDrop);
      }
      chainSlots.appendChild(slot);
    });

    discardCards.forEach(card => {
      discardPile.appendChild(createCardElement(card));
    });

    updateScores();
    updateButtons();
  }

  function createCardElement(card) {
    const el = document.createElement('div');
    el.classList.add('card');
    el.draggable = true;
    el.dataset.id = card.id;
    el.innerHTML = `<span>${card.text}</span>`;
    el.addEventListener('dragstart', handleDragStart);
    return el;
  }

  function handleDragStart(e) {
    e.dataTransfer.setData('text/plain', e.target.dataset.id);
    e.dataTransfer.effectAllowed = 'move';
  }

  function handleDrop(e) {
    e.preventDefault();
    const cardId = e.dataTransfer.getData('text/plain');
    const droppedSlotIndex = parseInt(e.target.closest('.card-slot').dataset.index);

    const draggedCard = drawCards.find(c => c.id === cardId) || discardCards.find(c => c.id === cardId);

    if (draggedCard) {
      if (draggedCard.id === currentQuestion.solution[droppedSlotIndex].id) {
        // Correct drop
        const cardIndex = drawCards.findIndex(c => c.id === cardId);
        if (cardIndex !== -1) {
          drawCards.splice(cardIndex, 1);
        } else {
          const discardIndex = discardCards.findIndex(c => c.id === cardId);
          discardCards.splice(discardIndex, 1);
        }
        
        chainCards[droppedSlotIndex] = draggedCard;
        showToast('✅ Correct!');
        checkIfComplete();
      } else {
        // Incorrect drop
        incorrectScore++;
        showToast('❌ Incorrect, try again.');
      }
      renderPiles();
    }
  }

  function checkIfComplete() {
    const isComplete = chainCards.every(card => card !== null);
    if (isComplete) {
      showToast('🎉 Well done, question solved!');
      nextBtn.disabled = false;
      hintBtn.disabled = true;
      geminiHintBtn.disabled = true;
      clearInterval(timerInterval);
    }
  }

  function updateScores() {
    correctScoreEl.textContent = currentQuestion.solution.length - chainCards.filter(c => c === null).length;
    incorrectScoreEl.textContent = incorrectScore;
  }

  function updateButtons() {
    hintBtn.disabled = false;
    geminiHintBtn.disabled = false;
    speakBtn.disabled = false;
  }

  function loadQuestions() {
    const categories = [...new Set(questionsData.map(q => q.category))];
    const difficulties = [...new Set(questionsData.map(q => q.difficulty))];

    categorySelect.innerHTML = categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
    difficultySelect.innerHTML = difficulties.map(diff => `<option value="${diff}">${diff}</option>`).join('');
  }

  function loadQuestion() {
    restartTimer();
    nextBtn.disabled = true;
    incorrectScore = 0;

    const selectedCategory = categorySelect.value;
    const selectedDifficulty = difficultySelect.value;
    const filteredQuestions = questionsData.filter(q => 
      q.category === selectedCategory && q.difficulty === selectedDifficulty
    );

    if (filteredQuestions.length === 0) {
      questionTextEl.textContent = "No questions available for this combination.";
      return;
    }

    const randomQuestion = filteredQuestions[Math.floor(Math.random() * filteredQuestions.length)];
    currentQuestion = randomQuestion;

    questionTextEl.textContent = currentQuestion.text;
    questionHintEl.textContent = '';

    const solutionSteps = currentQuestion.solution.map((step, index) => ({
      id: `solution-${index}`,
      text: step
    }));
    const distractors = currentQuestion.distractors.map((distractor, index) => ({
      id: `distractor-${index}`,
      text: distractor
    }));

    drawCards = shuffle([...solutionSteps, ...distractors]);
    chainCards = Array(solutionSteps.length).fill(null);
    discardCards = [];
    
    renderPiles();
    updateButtons();
  }

  function restartTimer() {
    clearInterval(timerInterval);
    gameTimer = 60;
    timerEl.textContent = gameTimer;
    timerInterval = setInterval(() => {
      gameTimer--;
      timerEl.textContent = gameTimer;
      if (gameTimer <= 0) {
        clearInterval(timerInterval);
        showToast('Time’s up! The correct solution has been highlighted.');
        highlightCorrectSolution();
      }
    }, 1000);
  }

  function highlightCorrectSolution() {
    chainCards = currentQuestion.solution.map((step, index) => ({
      id: `solution-${index}`,
      text: step
    }));
    drawCards = [];
    discardCards = [];
    renderPiles();
    nextBtn.disabled = false;
    hintBtn.disabled = true;
    geminiHintBtn.disabled = true;
  }

  function highlightHint() {
    const nextEmptySlotIndex = chainCards.findIndex(c => c === null);
    if (nextEmptySlotIndex !== -1) {
      questionHintEl.textContent = currentQuestion.solution[nextEmptySlotIndex].text;
    } else {
      showToast('All steps have been completed!');
    }
  }

  function speakQuestion() {
    if ('speechSynthesis' in window) {
      const utterance = new SpeechSynthesisUtterance(currentQuestion.text);
      utterance.lang = 'en-US'; 
      window.speechSynthesis.speak(utterance);
    } else {
      showToast('Speech synthesis is not supported in this browser.');
    }
  }

  function showToast(msg, duration = 3000) {
    const container = document.querySelector('.toast-container');
    const el = document.createElement('div');
    el.classList.add('toast');
    el.textContent = msg;
    container.appendChild(el);
    setTimeout(() => el.remove(), duration);
  }

  /* ===========================
     EVENT LISTENERS & INIT
  =========================== */
  hintBtn.addEventListener("click", highlightHint);
  geminiHintBtn.addEventListener("click", getGeminiHint);
  speakBtn.addEventListener("click", speakQuestion);
  restartBtn.addEventListener("click", loadQuestion);
  nextBtn.addEventListener("click", loadQuestion);
  categorySelect.addEventListener("change", loadQuestion);
  difficultySelect.addEventListener("change", loadQuestion);
  
  drawPile.addEventListener("dragover", e => e.preventDefault());
  drawPile.addEventListener("drop", e => {
    e.preventDefault();
    const cardId = e.dataTransfer.getData("text/plain");
    const cardIndex = discardCards.findIndex(c => c.id === cardId);
    if (cardIndex !== -1) {
      const card = discardCards.splice(cardIndex, 1)[0];
      drawCards.push(card);
      renderPiles();
      showToast("✅ Step restored - try again!", 1200);
    }
  });
  
  // Initialize
  window.onload = function() {
    loadQuestions();
    loadQuestion();
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(reg => console.log('Service Worker Registered'))
        .catch(err => console.log('Service Worker Registration Failed', err));
    }
  };

  function getGeminiHint() {
    geminiHintBtn.disabled = true;
    const originalText = geminiHintBtn.textContent;
    geminiHintBtn.textContent = 'Hint is being generated...';
    
    const nextEmptySlotIndex = chainCards.findIndex(c => c === null);
    if (nextEmptySlotIndex === -1) {
        showToast("All steps have been completed!");
        geminiHintBtn.disabled = false;
        geminiHintBtn.textContent = originalText;
        return;
    }

    const prompt = `The math question is: "${currentQuestion.text}". The solution is presented in steps. The first ${nextEmptySlotIndex} steps have already been placed. Give a short, one-sentence hint about what the next step is, using simple language. Do not provide the solution or the final answer, just a general hint for the next step.`;

    // Assume an API call to Gemini is made here
    // For now, this is a placeholder
    // gemini.generateText({ prompt: prompt }).then(response => {
    //   questionHintEl.textContent = response.text;
    //   geminiHintBtn.disabled = false;
    //   geminiHintBtn.textContent = originalText;
    // });
    
    // Placeholder response
    const hint = "Think about the first step of solving the problem.";
    questionHintEl.textContent = hint;
    geminiHintBtn.disabled = false;
    geminiHintBtn.textContent = originalText;
  }
</script>
</body>
</html>